<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Static HTML file</title>
    <style>
      html, body {
        box-sizing: border-box;
        display: flow-root;
        height: 100%;
        margin: 0;
        padding: 0;
      }
    </style>
    <script type="text/javascript" src="https://cdn.bokeh.org/bokeh/release/bokeh-3.4.1.min.js"></script>
    <script type="text/javascript">
        Bokeh.set_log_level("info");
    </script>
  </head>
  <body>
    <div id="f01c1257-2ef2-4605-acf7-74bcfb64575d" data-root-id="p1817" style="display: contents;"></div>
  
    <script type="application/json" id="a61265ad-7e7b-4d39-ade7-9d53ead6f87f">
      {"fc8ccfd2-6874-41ec-b7f9-8edcf9006a81":{"version":"3.4.1","title":"Bokeh Application","roots":[{"type":"object","name":"Plot","id":"p1817","attributes":{"sizing_mode":"stretch_both","x_range":{"type":"object","name":"Range1d","id":"p1807","attributes":{"start":-1.1,"end":1.1}},"y_range":{"type":"object","name":"Range1d","id":"p1808","attributes":{"start":-1.1,"end":1.1}},"x_scale":{"type":"object","name":"LinearScale","id":"p1823"},"y_scale":{"type":"object","name":"LinearScale","id":"p1824"},"title":{"type":"object","name":"Title","id":"p1820","attributes":{"text":"df"}},"renderers":[{"type":"object","name":"GraphRenderer","id":"p1832","attributes":{"layout_provider":{"type":"object","name":"StaticLayoutProvider","id":"p1849","attributes":{"graph_layout":{"type":"map","entries":[["1",{"type":"ndarray","array":{"type":"bytes","data":"ZmZmZmZm7j+HoS2YFhlUPg=="},"shape":[2],"dtype":"float64","order":"little"}],["2",{"type":"ndarray","array":{"type":"bytes","data":"vXBeicFT6j8QxEdwZmbePw=="},"shape":[2],"dtype":"float64","order":"little"}],["5",{"type":"ndarray","array":{"type":"bytes","data":"97g3UmZm3j93qZmnwVPqPw=="},"shape":[2],"dtype":"float64","order":"little"}],["8",{"type":"ndarray","array":{"type":"bytes","data":"TWt7zxUnWL7FODtmZmbuPw=="},"shape":[2],"dtype":"float64","order":"little"}],["10",{"type":"ndarray","array":{"type":"bytes","data":"VQiMhGZm3r8bQzOJwVPqPw=="},"shape":[2],"dtype":"float64","order":"little"}],["11",{"type":"ndarray","array":{"type":"bytes","data":"4v7udMFT6r/IkBStZmbePw=="},"shape":[2],"dtype":"float64","order":"little"}],["3",{"type":"ndarray","array":{"type":"bytes","data":"ivT2UWZm7r9bI0Mv/kRxvg=="},"shape":[2],"dtype":"float64","order":"little"}],["4",{"type":"ndarray","array":{"type":"bytes","data":"PmVVk8FT6r+DMK8pZmbevw=="},"shape":[2],"dtype":"float64","order":"little"}],["6",{"type":"ndarray","array":{"type":"bytes","data":"iAiM7GVm3r/fkoCTwVPqvw=="},"shape":[2],"dtype":"float64","order":"little"}],["7",{"type":"ndarray","array":{"type":"bytes","data":"6Le44rdMYD4sIiJSZmbuvw=="},"shape":[2],"dtype":"float64","order":"little"}],["9",{"type":"ndarray","array":{"type":"bytes","data":"P+xqFWZm3j/fkoCTwVPqvw=="},"shape":[2],"dtype":"float64","order":"little"}],["12",{"type":"ndarray","array":{"type":"bytes","data":"YAr4asFT6j8K/Xv+Zmbevw=="},"shape":[2],"dtype":"float64","order":"little"}]]}}},"node_renderer":{"type":"object","name":"GlyphRenderer","id":"p1837","attributes":{"data_source":{"type":"object","name":"ColumnDataSource","id":"p1834","attributes":{"selected":{"type":"object","name":"Selection","id":"p1835","attributes":{"indices":[],"line_indices":[]}},"selection_policy":{"type":"object","name":"UnionRenderers","id":"p1836"},"data":{"type":"map","entries":[["desc",["Main character who works as a traveling salesman in order to provide money for his sister and parents.","His family","Main place where things happen","One morning the character realises that he has transformed into a bug","At first others tried to acommodate the transformed protagonist, but then gradually they started neglecting him","After months of exhaustion and mistreat the death happens to Gregor","His boss","Is an old widowed lady who is employed to take care of the household duties","Living room of the family Samsa","Beautiful place outside the city","Others come to know about what happened to the protagonist.","Getting rid of the strange creature makes the family reunite and breathe easier."]],["marker",["circle","circle","triangle","square","square","square","circle","circle","triangle","triangle","square","square"]],["index",["1","2","5","8","10","11","3","4","6","7","9","12"]],["name",["Gregor Samsa","The Family","Bedroom","Transformation","Neglect","Death","The Office Manager","Charwoman","Living room","Countryside","Revelation","Relief"]],["type",["Character","Character","Location","Event","Event","Event","Character","Character","Location","Location","Event","Event"]],["x",[0.95,0.8227241213785629,0.4749999812037368,-2.2493932909767646e-08,-0.47500002807658365,-0.8227240833147926,-0.9499999619362296,-0.822724139939204,-0.47499988651555514,3.03605215103482e-08,0.47499992457932544,0.8227240647541514]],["y",[1.8717722048880223e-08,0.4750000092017794,0.8227241776888111,0.9499999996858369,0.8227241210643997,0.4750000658261908,-6.433391403210159e-08,-0.4749999434541296,-0.822724140253367,-0.9499999622503927,-0.822724140253367,-0.4750001416395696]]]}}},"view":{"type":"object","name":"CDSView","id":"p1838","attributes":{"filter":{"type":"object","name":"AllIndices","id":"p1839"}}},"glyph":{"type":"object","name":"Scatter","id":"p1850","attributes":{"size":{"type":"value","value":40},"fill_color":{"type":"value","value":"#003C43"},"marker":{"type":"field","field":"marker"}}},"selection_glyph":{"type":"object","name":"Scatter","id":"p1851","attributes":{"size":{"type":"value","value":40},"fill_color":{"type":"value","value":"#E3FEF7"},"marker":{"type":"field","field":"marker"}}}}},"edge_renderer":{"type":"object","name":"GlyphRenderer","id":"p1844","attributes":{"data_source":{"type":"object","name":"ColumnDataSource","id":"p1841","attributes":{"selected":{"type":"object","name":"Selection","id":"p1842","attributes":{"indices":[],"line_indices":[]}},"selection_policy":{"type":"object","name":"UnionRenderers","id":"p1843"},"data":{"type":"map","entries":[["weight",[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]],["start",["1","1","1","1","2","2","2","5","5","5","8","10","10","10","10","11","11","3","6","6","7"]],["end",["8","10","11","9","10","9","12","8","10","11","9","11","9","4","6","4","12","9","9","12","12"]]]}}},"view":{"type":"object","name":"CDSView","id":"p1845","attributes":{"filter":{"type":"object","name":"AllIndices","id":"p1846"}}},"glyph":{"type":"object","name":"MultiLine","id":"p1852","attributes":{"line_color":{"type":"value","value":"#003C43"}}},"selection_glyph":{"type":"object","name":"MultiLine","id":"p1853","attributes":{"line_color":{"type":"value","value":"#E3FEF7"}}}}},"selection_policy":{"type":"object","name":"NodesOnly","id":"p1847"},"inspection_policy":{"type":"object","name":"NodesOnly","id":"p1848"}}}],"toolbar":{"type":"object","name":"Toolbar","id":"p1822","attributes":{"autohide":true,"tools":[{"type":"object","name":"BoxZoomTool","id":"p1809","attributes":{"overlay":{"type":"object","name":"BoxAnnotation","id":"p1810","attributes":{"syncable":false,"level":"overlay","visible":false,"left":{"type":"number","value":"nan"},"right":{"type":"number","value":"nan"},"top":{"type":"number","value":"nan"},"bottom":{"type":"number","value":"nan"},"left_units":"canvas","right_units":"canvas","top_units":"canvas","bottom_units":"canvas","line_color":"black","line_alpha":1.0,"line_width":2,"line_dash":[4,4],"fill_color":"lightgrey","fill_alpha":0.5}}}},{"type":"object","name":"ResetTool","id":"p1815"},{"type":"object","name":"HoverTool","id":"p1816","attributes":{"renderers":"auto"}},{"type":"object","name":"HoverTool","id":"p1825","attributes":{"renderers":"auto","tooltips":null}},{"type":"object","name":"BoxSelectTool","id":"p1826","attributes":{"renderers":"auto","overlay":{"type":"object","name":"BoxAnnotation","id":"p1827","attributes":{"syncable":false,"level":"overlay","visible":false,"left":{"type":"number","value":"nan"},"right":{"type":"number","value":"nan"},"top":{"type":"number","value":"nan"},"bottom":{"type":"number","value":"nan"},"editable":true,"line_color":"black","line_alpha":1.0,"line_width":2,"line_dash":[4,4],"fill_color":"lightgrey","fill_alpha":0.5}}}},{"type":"object","name":"TapTool","id":"p1864","attributes":{"renderers":"auto","callback":{"type":"object","name":"CustomJS","id":"p1863","attributes":{"args":{"type":"map","entries":[["source",{"type":"object","name":"ColumnDataSource","id":"p1860","attributes":{"selected":{"type":"object","name":"Selection","id":"p1861","attributes":{"indices":[],"line_indices":[]}},"selection_policy":{"type":"object","name":"UnionRenderers","id":"p1862"},"data":{"type":"map","entries":[["x",[0.95,0.8227241213785629,0.4749999812037368,-2.2493932909767646e-08,-0.47500002807658365,-0.8227240833147926,-0.9499999619362296,-0.822724139939204,-0.47499988651555514,3.03605215103482e-08,0.47499992457932544,0.8227240647541514]],["y",[1.8717722048880223e-08,0.4750000092017794,0.8227241776888111,0.9499999996858369,0.8227241210643997,0.4750000658261908,-6.433391403210159e-08,-0.4749999434541296,-0.822724140253367,-0.9499999622503927,-0.822724140253367,-0.4750001416395696]],["index",["1","2","5","8","10","11","3","4","6","7","9","12"]],["name",["Gregor Samsa","The Family","Bedroom","Transformation","Neglect","Death","The Office Manager","Charwoman","Living room","Countryside","Revelation","Relief"]],["type",["Character","Character","Location","Event","Event","Event","Character","Character","Location","Location","Event","Event"]],["desc",["Main character who works as a traveling salesman in order to provide money for his sister and parents.","His family","Main place where things happen","One morning the character realises that he has transformed into a bug","At first others tried to acommodate the transformed protagonist, but then gradually they started neglecting him","After months of exhaustion and mistreat the death happens to Gregor","His boss","Is an old widowed lady who is employed to take care of the household duties","Living room of the family Samsa","Beautiful place outside the city","Others come to know about what happened to the protagonist.","Getting rid of the strange creature makes the family reunite and breathe easier."]]]}}}]]},"code":"\n    // Get the index of the tapped node\n    var index = cb_data.source.selected.indices[0];\n    console.log(\"Node tapped:\", index);\n    \n    //Access the data from the source\n    var data = source.data;\n    console.log('data is: ')\n    console.log(data);\n    var node_name=data.name[index];\n    var node_type = data.type[index];  \n    var node_desc = data.desc[index]; \n    // Set data attributes of the modal elements\n    //document.getElementById('nodeModalLabel').innerText = node_data[node_type] + ' ' + node_data['node_name'];\n    document.getElementById('node_name_modal').innerText = node_type + ': ' + node_name;\n    document.getElementById('node_desc_modal').value= node_desc;\n    // Show Bootstrap modal\n    $('#nodeModal').modal('show');\n    \n    // Bind event handler for shown.bs.modal event after the modal is shown\n    $('#nodeModal').on('shown.bs.modal', function() {\n        console.log('Modal is shown');\n        var element = document.getElementById(\"node_name_modal\");\n        \n        // Only show data for hardcoded element - location\n        var value = \"Location: Bedroom\"; // Specific value to check against\n        var myDiv = document.getElementById(\"div-location\");\n        if (element.innerHTML.trim() === value) {\n            myDiv.style.display = \"block\";} \n            else {\n            myDiv.style.display = \"none\";}\n        \n        // Only show data for hardcoded element - char\n        var value = \"Character: The Office Manager\"; // Specific value to check against\n        var myDiv = document.getElementById(\"div-char\");\n        if (element.innerHTML.trim() === value) {\n            myDiv.style.display = \"block\";} \n            else {\n            myDiv.style.display = \"none\";}\n        \n        //Only show data for hardcoded element - event\n        var value = \"Event: Neglect\"; // Specific value to check against\n        var myDiv = document.getElementById(\"div-event\");\n        if (element.innerHTML.trim() === value) {\n            myDiv.style.display = \"block\";} \n            else {\n            myDiv.style.display = \"none\";}\n        \n        \n        //  Adaptable interface         \n         $.ajax({       \n         url: '/meaning/retrieve_data_from_mysql', // Flask route to retrieve data\n         type: 'GET',\n        success: function(data){\n            console.log(data);\n            \n            // Update button text based on data\n            $('.import_text').text(\"Import Text Component (\" + data.tool_text + \")\");\n            $('.import_visual').text(\"Import Visual Component (\" + data.tool_visual + \")\");\n        \n            \n            // hide by default\n            $('.use_fig_lang').hide();\n            $('.use_content_gen').hide();\n            $('.use_ind_sup').hide();\n            switchInterface(data);\n            }});\n        \n        function switchInterface(data) {\n         if (data.modality === '2.text') {\n            console.log('text');\n            handleTextModality(data);\n            } \n        else if (data.modality === '3.text+visual') {\n            console.log('text and visual');\n            handleTextVisualModality(data);\n            }\n        else {\n        console.log('other');\n        handleOtherModality(data);\n            }\n        }\n        \n        \n        // Define the handleTextModality function\n        function handleTextModality(data) {\n            $('#col2').hide();\n            $('#col2-char').hide();\n            $('#col2-event').hide();\n            $('#col3').show(); // Show the specified div\n            $('#col3-char').show();\n            $('#col3-event').show();\n            $('.import_visual').hide(); // Hide the specified button\n            handleExternalTools(data);\n    }\n       function handleTextVisualModality(data) {\n            $('#col2').show();\n            $('#col2-char').show();\n            $('#col2-event').show();\n            $('#col3').show(); // Show the specified div\n            $('#col3-char').show();\n            $('#col3-event').show();\n            $('.import_text').show(); // Show the specified button\n            $('.import_visual').show();\n            handleExternalTools(data);\n       }\n       \n        function handleOtherModality(data) {\n            $('#col2').hide();\n            $('#col2-char').hide();\n            $('#col2-event').hide();\n            $('#col3').hide();// Show the specified div\n            $('#col3-char').hide();\n            $('#col3-event').hide();\n            $('.delete_comp').hide();// Show the specified button\n            $('.import_text').hide(); \n            $('.import_visual').hide();\n            handleExternalTools(data);\n       }\n   \n   function handleExternalTools(data) {\n    // Hide all buttons first\n    $('.use_fig_lang').hide();\n    $('.use_content_gen').hide();\n    $('.use_ind_sup').hide();\n\n    // Check which external tools are used and show corresponding buttons\n    var tools = data.external_tools.split(',');\n    tools.forEach(function(tool) {\n        switch (tool) {\n            case '1.Figurative':\n                console.log('Figurative');\n                $('.use_fig_lang').show();\n                break;\n            case '2.Content':\n                console.log('Content');\n                $('.use_content_gen').show();\n                break;\n            case '3.Socio_Cultural':\n                console.log('Socio-Cultural');\n                $('.use_ind_sup').show();\n                break;\n        }\n    });\n}\n\n   \n   \n        \n        \n    });\n    \n"}}}}]}},"toolbar_location":"below","center":[{"type":"object","name":"LabelSet","id":"p1856","attributes":{"source":{"id":"p1834"},"x":{"type":"field","field":"index","transform":{"type":"object","name":"CustomJSTransform","id":"p1854","attributes":{"args":{"type":"map","entries":[["provider",{"id":"p1849"}]]},"v_func":"\n        var result = new Float64Array(xs.length)\n        for (var i = 0; i &lt; xs.length; i++) {\n            result[i] = provider.graph_layout[xs[i]][0]\n        }\n        return result\n    "}}},"y":{"type":"field","field":"index","transform":{"type":"object","name":"CustomJSTransform","id":"p1855","attributes":{"args":{"type":"map","entries":[["provider",{"id":"p1849"}]]},"v_func":"\n        var result = new Float64Array(xs.length)\n        for (var i = 0; i &lt; xs.length; i++) {\n            result[i] = provider.graph_layout[xs[i]][1]\n        }\n        return result\n    "}}},"text":{"type":"field","field":"name"},"y_offset":{"type":"value","value":-35},"text_font_size":{"type":"value","value":"12px"}}}],"background_fill_color":"#77B0AA"}}]}}
    </script>
    <script type="text/javascript">
      (function() {
        const fn = function() {
          Bokeh.safely(function() {
            (function(root) {
              function embed_document(root) {
              const docs_json = document.getElementById('a61265ad-7e7b-4d39-ade7-9d53ead6f87f').textContent;
              const render_items = [{"docid":"fc8ccfd2-6874-41ec-b7f9-8edcf9006a81","roots":{"p1817":"f01c1257-2ef2-4605-acf7-74bcfb64575d"},"root_ids":["p1817"]}];
              root.Bokeh.embed.embed_items(docs_json, render_items);
              }
              if (root.Bokeh !== undefined) {
                embed_document(root);
              } else {
                let attempts = 0;
                const timer = setInterval(function(root) {
                  if (root.Bokeh !== undefined) {
                    clearInterval(timer);
                    embed_document(root);
                  } else {
                    attempts++;
                    if (attempts > 100) {
                      clearInterval(timer);
                      console.log("Bokeh: ERROR: Unable to run BokehJS code because BokehJS library is missing");
                    }
                  }
                }, 10, root)
              }
            })(window);
          });
        };
        if (document.readyState != "loading") fn();
        else document.addEventListener("DOMContentLoaded", fn);
      })();
    </script>
  </body>
</html>